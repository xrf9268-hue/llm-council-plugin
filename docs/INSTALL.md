# LLM Council Plugin - Installation & Debugging Guide

## Overview

This guide explains how to install the LLM Council plugin for Claude Code and how to debug it using Claude Code's marketplace and developer tools.

## Prerequisites

- Claude Code installed and signed in (VS Code or JetBrains).
- At least one CLI installed:
  - **Required**: Claude CLI â€“ see https://code.claude.com/docs/en/setup
  - **Optional**: `codex`, `gemini` for full multi-model council.
- Public GitHub repository: `https://github.com/xrf9268-hue/llm-council-plugin.git`.

## Installation

### Option A: Install via a marketplace (recommended)

Follow the official Claude Code docs for plugin marketplaces.

1. In Claude Code, open the **Marketplaces** section.
2. Add this repository as a marketplace:
   - **GitHub repository**: enter `xrf9268-hue/llm-council-plugin` (equivalent CLI command:  
     ```shell
     /plugin marketplace add xrf9268-hue/llm-council-plugin
     ```
   - **Git repository URL**: enter `https://github.com/xrf9268-hue/llm-council-plugin.git` (equivalent CLI command:  
     ```shell
     /plugin marketplace add https://github.com/xrf9268-hue/llm-council-plugin.git
     ```  
   ).
3. After the marketplace syncs, you should see a marketplace named `llm-council` containing a plugin `llm-council-plugin`. Install it from the UI or via:

```shell
/plugin install llm-council-plugin@llm-council
```

### Option B: Install from a local checkout

1. Clone this repository into your project or a standalone directory:

```bash
# Clone as a standalone plugin
git clone https://github.com/xrf9268-hue/llm-council-plugin.git

# Or add to your project's .claude-plugins directory
cd your-project
git clone https://github.com/xrf9268-hue/llm-council-plugin.git .claude-plugins/llm-council
```

2. Ensure scripts are executable (run once in your local clone):

```bash
chmod +x hooks/*.sh skills/council-orchestrator/scripts/*.sh
```

3. Reload Claude Code so it picks up the plugin.

## Verify Installation

### Check CLI dependencies

From the repository root:

```bash
# Resolve path to council_utils.sh
PLUGIN_ROOT="${COUNCIL_PLUGIN_ROOT:-${CLAUDE_PLUGIN_ROOT:-${CLAUDE_PROJECT_DIR}}}"
source "${PLUGIN_ROOT}/skills/council-orchestrator/scripts/council_utils.sh" && get_cli_status
```

Confirm at least `claude` is reported as available.

### Check plugin commands

In Claude Code:

- Open the plugin list and verify **LLM Council** is installed and enabled.
- Start typing `/council` in the chat input. You should see both:
  - Unprefixed commands, e.g. `/council`, `/council-help`, `/council-status`, `/council-config`
  - Namespaced plugin commands, e.g. `/llm-council-plugin:council`, `/llm-council-plugin:council-help`, etc.

Per the official slash command docs, the namespaced form (`/plugin-name:command-name`) is optional unless there are name collisions. For normal use you can just type the unprefixed versions.

### Run the `/council` command

In a Claude Code chat, run either of the following (they are equivalent):

```text
/council "test query from Claude Code"
```

or

```text
/llm-council-plugin:council "test query from Claude Code"
```

Expect:

- No "Unknown command" errors.
- A response generated by the LLM Council flow.

### Check skill and output files

After running a test `/council` invocation, check from the repo root:

```bash
ls .council
cat .council/stage1_claude.txt
```

You should see:

- `.council/` directory present.
- `stage1_claude.txt` non-empty, containing the answer to your test query.

Each new `/council` run will reset the `.council/` directory for the new session, so files from previous sessions will not contaminate the current run. When you no longer need any session files, you can delete the working directory with the `/council-cleanup` command.

## Debugging & Logs

### Use Claude Code debugging tools

1. Open the **plugin developer tools** / debugging view in Claude Code (see the official docs on "Debugging and development tools").
2. Select the **LLM Council** plugin.
3. Enable verbose or trace logging if available.

Then:

- Run `/council "debug test"` in a chat.
- In the debug view, confirm the call chain:
  - `/council` command is parsed.
  - `council-orchestrator` skill is invoked.
  - Skill scripts (`council_utils.sh`, `query_claude.sh`, `run_parallel.sh`, etc.) are executed without fatal errors.

### Debug scripts directly in the terminal

If you suspect CLI or bash issues, run scripts from the repo root:

```bash
# Resolve plugin root
PLUGIN_ROOT="${COUNCIL_PLUGIN_ROOT:-${CLAUDE_PLUGIN_ROOT:-${CLAUDE_PROJECT_DIR}}}"

# Single-model: Claude only
"${PLUGIN_ROOT}/skills/council-orchestrator/scripts/query_claude.sh" "terminal test"

# Stage 1: parallel opinion collection
"${PLUGIN_ROOT}/skills/council-orchestrator/scripts/run_parallel.sh" "terminal test"

# Stage 2: peer review
"${PLUGIN_ROOT}/skills/council-orchestrator/scripts/run_peer_review.sh" "terminal test" .council

# Stage 3: chairman synthesis prompt
"${PLUGIN_ROOT}/skills/council-orchestrator/scripts/run_chairman.sh" "terminal test" .council
```

Once these work reliably in the terminal, they should also work when invoked through `/council` inside Claude Code.

## Common Issues & Tips

- **`/council` missing from autocomplete**:
  - Check that the plugin is installed and enabled in Claude Code.
  - Use the plugin debug tools to confirm `plugin.json` loaded without errors.

- **`/council` errors or no response**:
  - First, test `query_claude.sh` and `run_parallel.sh` directly in the terminal.
  - Confirm `.council/` and `stage1_claude.txt` are created after a run.

- **Marketplace cannot find LLM Council**:
  - Ensure you added the GitHub repository `xrf9268-hue/llm-council-plugin` as a marketplace (for example:  
    ```shell
    /plugin marketplace add xrf9268-hue/llm-council-plugin
    ```).
  - Confirm the repo is public and contains `.claude-plugin/marketplace.json`.
  - Trigger a marketplace refresh in Claude Code and search again; you should see a marketplace `llm-council` with a plugin `llm-council-plugin`.
